<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Measurement Observation Scenario 1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Educational Blue -->
    <!-- Application Structure Plan: The SPA is designed as a sequential, multi-step interactive tutorial. This linear structure is the most effective pedagogical approach for teaching a process, guiding the user through each of the 7 calculations from the report one at a time. This prevents cognitive overload and ensures mastery of one concept before moving to the next. The user flow is: 1) Read the problem. 2) Optionally click to reveal a 'Tutor's Tip'. 3) Enter their own answer. 4) Click 'Check Answer' for instant, detailed feedback. 5) Score is updated. 6) The 'Next' button unlocks. This guided, interactive format with scoring is superior for learning and engagement. -->
    <!-- Visualization & Content Choices: The report's 7 calculation problems are transformed into 7 sequential, interactive steps. Goal: To teach a mathematical process. Method: A multi-step tutorial built with HTML/CSS/JS. Interaction: The user inputs their answer, clicks a button to trigger JS validation, and receives dynamic feedback. A score and progress bar provide motivation. The 'Tutor's Tip' is now a clickable accordion to encourage self-solving first. Justification: This forces active recall and problem-solving, which is critical for learning retention. The scoring adds a gamification element, and the final summary provides a tangible result for submission. No charts are needed. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #eef2f9;
        }
        .tutor-container {
            background-color: #FFFFFF;
            border-radius: 1rem;
            box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.1);
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border: 1px solid transparent;
        }
        .btn-primary {
            background-color: #007BFF;
            color: white;
            border-color: #007BFF;
        }
        .btn-primary:hover {
            background-color: #0056b3;
        }
        .btn-secondary {
            background-color: #6C757D;
            color: white;
            border-color: #6C757D;
        }
        .btn-secondary:hover {
            background-color: #5a6268;
        }
        .btn-disabled {
            background-color: #E9ECEF;
            color: #6C757D;
            cursor: not-allowed;
            border-color: #CED4DA;
        }
        .progress-bar-fill {
            background-color: #007BFF;
            transition: width 0.5s ease-in-out;
        }
        .input-field {
            border: 2px solid #CED4DA;
            transition: border-color 0.3s;
        }
        .input-field:focus {
            outline: none;
            border-color: #007BFF;
        }
        .feedback {
            border-left-width: 4px;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0.25rem;
        }
        .feedback-correct {
            background-color: #D4EDDA;
            border-color: #28A745;
            color: #155724;
        }
        .feedback-incorrect {
            background-color: #F8D7DA;
            border-color: #DC3545;
            color: #721C24;
        }
        .formula {
            background-color: #e9ecef;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            color: #c7254e;
        }
        #tip-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            padding-left: 1rem;
            padding-right: 1rem;
        }
        #tip-content.open {
            max-height: 500px; /* Large enough to fit content */
            padding-top: 0;
            padding-bottom: 1rem;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="tutor-container w-full max-w-3xl">
        <div class="p-6 sm:p-8" id="tutor-content">
            <!-- Step content will be injected here -->
        </div>

        <div class="bg-gray-50 px-6 sm:px-8 py-4 border-t border-gray-200 rounded-b-2xl">
            <div class="flex justify-between items-center mb-4">
                <button id="prev-btn" class="btn btn-secondary">Previous</button>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-600">Score: <span id="score-text">0 / 7</span></div>
                    <div class="text-xs text-gray-500">Step <span id="progress-text">1 of 7</span></div>
                </div>
                <button id="next-btn" class="btn btn-primary">Next</button>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 14.2%;"></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const steps = [
                {
                    title: "Total Concrete Weight",
                    problem: "Your first job is to work out the total weight of the concrete delivery. You have <strong>14 bags</strong> on the pallet, and each bag weighs <strong>20kg</strong>. What is the total weight?",
                    explanation: "To find the total weight, multiply the number of bags by the weight of one bag. The formula is: <br><code class='formula'>Total Weight = Number of Bags × Weight per Bag</code>",
                    inputs: [{ id: 'userAnswer', placeholder: 'Your Answer (kg)', type: 'number' }],
                    solution: () => 14 * 20,
                    working: (val) => `14 bags × 20 kg/bag = <strong>${val} kg</strong>`,
                    unit: 'kg'
                },
                {
                    title: "Benchtop Perimeter",
                    problem: "Now, let's measure the old workshop bench. Let's say it measures <strong>2400mm long</strong> and <strong>900mm wide</strong>. What is its perimeter in metres?",
                    explanation: "The perimeter is the total distance around the outside. The formula is <code class='formula'>Perimeter = 2 × (Length + Width)</code>. Remember to convert millimetres to metres first by dividing by 1000!",
                    inputs: [{ id: 'userAnswer', placeholder: 'Your Answer (m)', type: 'number', step: '0.01' }],
                    solution: () => 2 * (2.4 + 0.9),
                    working: (val) => `First, convert: 2400mm = 2.4m, 900mm = 0.9m.<br>Then, 2 × (2.4m + 0.9m) = <strong>${val.toFixed(2)} m</strong>`,
                    unit: 'm'
                },
                {
                    title: "Benchtop Area",
                    problem: "Using the same bench (<strong>2400mm x 900mm</strong>), what is its surface area in square metres (m²)?",
                    explanation: "Area is the total flat surface. The formula is <code class='formula'>Area = Length × Width</code>. Your answer should be in square metres (m²).",
                    inputs: [{ id: 'userAnswer', placeholder: 'Your Answer (m²)', type: 'number', step: '0.01' }],
                    solution: () => 2.4 * 0.9,
                    working: (val) => `2.4m × 0.9m = <strong>${val.toFixed(2)} m²</strong>`,
                    unit: 'm²'
                },
                {
                    title: "Benchtop Volume",
                    problem: "The new concrete countertop will be <strong>2400mm long</strong>, <strong>900mm wide</strong>, and <strong>50mm thick</strong>. What is its volume in cubic metres (m³)?",
                    explanation: "Volume is Length × Width × Thickness. Make sure all your measurements are in metres to get the answer in cubic metres (m³).",
                    inputs: [{ id: 'userAnswer', placeholder: 'Your Answer (m³)', type: 'number', step: '0.001' }],
                    solution: () => 2.4 * 0.9 * 0.05,
                    working: (val) => `2.4m × 0.9m × 0.05m = <strong>${val.toFixed(3)} m³</strong>`,
                    unit: 'm³'
                },
                {
                    title: "Volume with 10% Wastage",
                    problem: "We need to add a 10% wastage allowance to our concrete volume of <strong>0.108 m³</strong>. What is the total volume we should order?",
                    explanation: "To add 10% to a number, you multiply it by 1.10. The formula is: <br><code class='formula'>Total Volume = Base Volume × 1.10</code>",
                    inputs: [{ id: 'userAnswer', placeholder: 'Your Answer (m³)', type: 'number', step: '0.001' }],
                    solution: () => 0.108 * 1.10,
                    working: (val) => `0.108 m³ × 1.10 = <strong>${val.toFixed(4)} m³</strong>`,
                    unit: 'm³'
                },
                {
                    title: "Bucket Circumference",
                    problem: "The water bucket has a diameter of <strong>300mm</strong>. What is its circumference in metres?",
                    explanation: "Circumference is the distance around a circle. The formula uses Pi ($\pi$), which is about 3.142. <br><code class='formula'>Circumference = π × Diameter</code>",
                    inputs: [{ id: 'userAnswer', placeholder: 'Your Answer (m)', type: 'number', step: '0.01' }],
                    solution: () => Math.PI * 0.3,
                    working: (val) => `π × 0.3m = <strong>${val.toFixed(3)} m</strong>`,
                    unit: 'm'
                },
                {
                    title: "Concrete Mix Ratio",
                    problem: "The mix ratio is <strong>1:2:4</strong> (Cement:Sand:Aggregate). If we use <strong>2 buckets of cement</strong>, how many buckets of sand do we need?",
                    explanation: "For every 1 part cement, you need 2 parts sand. Since you have 2 buckets of cement, you just need to multiply the sand part of the ratio by 2.",
                    inputs: [{ id: 'userAnswer', placeholder: 'Buckets of Sand', type: 'number' }],
                    solution: () => 2 * 2,
                    working: (val) => `2 (buckets of cement) × 2 (ratio for sand) = <strong>${val} buckets of sand</strong>`,
                    unit: ' buckets'
                }
            ];

            let currentStep = 0;
            let score = 0;
            let attemptedSteps = new Array(steps.length).fill(false);

            const tutorContent = document.getElementById('tutor-content');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const scoreText = document.getElementById('score-text');

            function renderStep() {
                const step = steps[currentStep];
                let inputsHTML = step.inputs.map(input => `
                    <input type="${input.type}" id="${input.id}" placeholder="${input.placeholder}" ${input.step ? `step="${input.step}"` : ''} class="input-field w-full p-3 border rounded-md text-lg mt-4">
                `).join('');

                tutorContent.innerHTML = `
                    <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-2">${step.title}</h2>
                    <p class="text-gray-600 mb-4">${step.problem}</p>
                    <div class="bg-gray-100 rounded-lg mb-4 border border-gray-200">
                        <button id="tip-toggle-btn" class="w-full flex justify-between items-center p-4 text-left font-semibold text-gray-700 focus:outline-none">
                            <span>💡 Tutor's Tip</span>
                            <svg id="tip-arrow" class="w-5 h-5 transition-transform transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="tip-content" class="px-4 text-sm text-gray-600">
                            <div class="py-4 border-t border-gray-200">${step.explanation}</div>
                        </div>
                    </div>
                    <div>${inputsHTML}</div>
                    <button id="check-answer-btn" class="btn btn-primary w-full mt-6">Check My Answer</button>
                    <div id="feedback-area" class="mt-4"></div>
                `;

                updateUI();
                attachEventListeners();
            }

            function updateUI() {
                scoreText.textContent = `${score} / ${steps.length}`;
                progressText.textContent = `${currentStep + 1} of ${steps.length}`;
                progressBar.style.width = `${((currentStep + 1) / steps.length) * 100}%`;

                prevBtn.disabled = currentStep === 0;
                prevBtn.classList.toggle('btn-disabled', currentStep === 0);

                nextBtn.disabled = !attemptedSteps[currentStep];
                nextBtn.classList.toggle('btn-disabled', !attemptedSteps[currentStep]);

                if (currentStep === steps.length - 1) {
                    nextBtn.textContent = 'Finish & Submit';
                } else {
                    nextBtn.textContent = 'Next';
                }
            }

            function attachEventListeners() {
                const checkBtn = document.getElementById('check-answer-btn');
                const tipToggleBtn = document.getElementById('tip-toggle-btn');
                const tipContent = document.getElementById('tip-content');
                const tipArrow = document.getElementById('tip-arrow');

                if (tipToggleBtn) {
                    tipToggleBtn.addEventListener('click', () => {
                        tipContent.classList.toggle('open');
                        tipArrow.classList.toggle('rotate-180');
                    });
                }

                if (checkBtn) {
                    checkBtn.addEventListener('click', () => {
                        const step = steps[currentStep];
                        const feedbackArea = document.getElementById('feedback-area');
                        const userAnswerInput = document.getElementById('userAnswer');
                        const userAnswer = parseFloat(userAnswerInput.value);

                        if (isNaN(userAnswer)) {
                            feedbackArea.innerHTML = `<div class="feedback feedback-incorrect"><p class="font-bold">Please enter a number to check your answer.</p></div>`;
                            return;
                        }

                        const correctAnswer = step.solution();
                        
                        if (!attemptedSteps[currentStep]) {
                             if (Math.abs(userAnswer - correctAnswer) < 0.01) {
                                score++;
                            }
                        }
                        
                        attemptedSteps[currentStep] = true;

                        if (Math.abs(userAnswer - correctAnswer) < 0.01) {
                            feedbackArea.innerHTML = `
                                <div class="feedback feedback-correct">
                                    <h5 class="font-bold">Correct! Well done.</h5>
                                    <p class="mt-2">Here's the working: ${step.working(correctAnswer)}</p>
                                </div>`;
                        } else {
                            feedbackArea.innerHTML = `
                                <div class="feedback feedback-incorrect">
                                    <h5 class="font-bold">Not quite. The correct answer is ${correctAnswer.toFixed(4)}${step.unit || ''}. Let's look at the solution:</h5>
                                    <p class="mt-2">${step.working(correctAnswer)}</p>
                                </div>`;
                        }
                        checkBtn.disabled = true;
                        checkBtn.classList.add('btn-disabled');
                        userAnswerInput.disabled = true;
                        updateUI();
                    });
                }
            }

            prevBtn.addEventListener('click', () => {
                if (currentStep > 0) {
                    currentStep--;
                    renderStep();
                }
            });

            nextBtn.addEventListener('click', () => {
                if (attemptedSteps[currentStep]) {
                    if (currentStep < steps.length - 1) {
                        currentStep++;
                        renderStep();
                    } else {
                        tutorContent.innerHTML = `
                            <h2 class="text-3xl font-bold text-green-600 text-center">Tutorial Complete!</h2>
                            <p class="text-gray-600 text-center mt-4">You have finished all the calculations. Your final score is <strong>${score} out of ${steps.length}</strong>.</p>
                            <p class="text-gray-500 text-center mt-2 text-sm">You can now submit this result to your teacher.</p>
                        `;
                        prevBtn.classList.remove('btn-secondary');
                        prevBtn.classList.add('btn-disabled');
                        prevBtn.disabled = true;
                        nextBtn.textContent = 'Submitted!';
                        nextBtn.classList.add('btn-disabled');
                        nextBtn.disabled = true;
                    }
                }
            });

            renderStep();
        });
    </script>
  <script src="../search.js"></script>
</body>
</html>
